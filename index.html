<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>{{{ PRODUCT_NAME }}}</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <style>
      .cover {
        position: fixed;
        z-index: 10000;
        background-color: black;
        width: 100vw;
        height: 100vh;
        display: none;
        justify-content: space-around;
        align-items: center;
      }
      #lottie{
        background-color:transparent;
        width:100px;
        height:100px;
        display:block;
        overflow: hidden;
        transform: translate3d(0,0,0);
        text-align: center;
        opacity: 1;
        z-index: 10001;
      }
    </style>
  </head>
  

<script type="text/javascript" src="TemplateData/tpbanksdk/tpbankhandler.js"></script>
<script type="text/javascript" src="TemplateData/tpbanksdk/tpbanksdk-1.1.min.js"></script>
  <body>
   
    <div id="unity-container" class="unity-desktop">
      <canvas id="unity-canvas" width={{{ WIDTH }}} height={{{ HEIGHT }}}></canvas>
      <div id="unity-loading-bar">
        
        <div id="unity-progress-bar-empty">
          <div id="unity-progress-bar-full"></div>
        </div>
      </div>
      <div id="unity-warning"> </div>
       
    </div>


    <script src="TemplateData/lottie.js"></script>
    <div id="cover" class="cover">
      <div id="lottie"></div>
    </div>
    <script>
      var animationData = {"v":"5.5.9","fr":60,"ip":0,"op":105,"w":500,"h":500,"nm":"Final Animate Loading","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":3,"ty":4,"nm":"Symbol Outlines 3","sr":1,"ks":{"o":{"a":0,"k":100},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":16,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":46,"s":[120]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":68,"s":[120]},{"t":97,"s":[240]}]},"p":{"a":0,"k":[250,246.875,0]},"a":{"a":0,"k":[374.809,241.355,0]},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0]},"t":46,"s":[40,40,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":52,"s":[20,20,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":62,"s":[20,20,100]},{"t":68,"s":[40,40,100]}]}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0.167},"t":16,"s":[{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[37.914,0]],"o":[[0,0],[0,0],[0,0],[0,0],[18.957,-32.821],[0,0]],"v":[[-341.461,-104.249],[-148.623,-22.475],[150.185,104.249],[317.706,-22.062],[322.505,-30.364],[279.852,-104.249]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0.167},"t":19,"s":[{"i":[[-9.569,6.017],[-1.2,-1.2],[-84.226,-23.773],[1.2,-1.2],[7.36,3.116],[80.147,38.851]],"o":[[1.55,-0.974],[1.2,1.2],[82.63,23.322],[-1.2,1.2],[2.37,-37.408],[-163.931,-28.15]],"v":[[-244.577,-113.229],[-10.842,-43.16],[175.078,45.782],[310.801,46.579],[341.483,21.962],[247.754,-83.012]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0.167},"t":25,"s":[{"i":[[-4.462,-16.189],[-4.186,-2.895],[-44.04,-28.717],[-4.532,-2.316],[18.434,36.756],[45.29,35.244]],"o":[[6.138,22.273],[45.052,31.16],[47.346,41.06],[38.377,19.61],[-19.78,-29.956],[-123.084,-75.628]],"v":[[-47.545,-127.055],[124.118,-22.677],[269.532,75.033],[325.417,118.889],[339.777,73.826],[260.349,-0.439]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0.167},"t":30,"s":[{"i":[[-44.657,28.079],[-5.598,-5.598],[-10.551,-32.836],[5.598,-5.598],[34.346,14.541],[16.243,32.239]],"o":[[7.232,-4.547],[5.598,5.598],[17.943,55.841],[-5.598,5.598],[-38.239,-23.746],[-26.031,-75.443]],"v":[[118.11,-131.265],[308.239,7.554],[348.245,99.408],[337.597,179.148],[269.625,198.936],[234.286,99.081]],"c":true}]},{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0.167},"t":34,"s":[{"i":[[-39.493,17.118],[-7.719,-45.709],[2.091,-57.722],[7.198,-7.198],[30.336,10.906],[9.036,46.217]],"o":[[78,9.02],[1.695,10.037],[13.457,46.457],[-7.198,7.198],[-37.832,-17.809],[-2.131,-126.074]],"v":[[233.948,-83.491],[346.786,86.098],[356.12,165.113],[343.28,236.636],[280.582,256.332],[221.552,163.272]],"c":true}]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":46,"s":[{"i":[[-36.612,0],[-11.997,-11.997],[0,-18.306],[11.997,-11.997],[18.306,0],[0,36.613]],"o":[[18.306,0],[11.997,11.997],[0,18.307],[-11.997,11.997],[-36.612,0],[0,-36.612]],"v":[[447.941,347.232],[494.816,366.649],[514.233,413.525],[494.816,460.401],[447.941,479.818],[381.648,413.525]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.333,"y":0},"t":68,"s":[{"i":[[-36.612,0],[-11.997,-11.997],[0,-18.306],[11.997,-11.997],[18.306,0],[0,36.613]],"o":[[18.306,0],[11.997,11.997],[0,18.307],[-11.997,11.997],[-36.612,0],[0,-36.612]],"v":[[447.941,347.232],[494.816,366.649],[514.233,413.525],[494.816,460.401],[447.941,479.818],[381.648,413.525]],"c":true}]},{"t":97,"s":[{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[37.914,0]],"o":[[0,0],[0,0],[0,0],[0,0],[18.957,-32.821],[0,0]],"v":[[-340.555,-90.194],[-147.717,-8.42],[151.091,118.304],[318.612,-8.007],[323.411,-16.309],[280.758,-90.194]],"c":true}]}]},"nm":"Path 2","hd":false},{"ty":"gf","o":{"a":0,"k":100},"r":1,"bm":0,"g":{"p":5,"k":{"a":0,"k":[0,0.863,0.353,0.157,0.15,0.91,0.427,0.141,0.3,0.957,0.502,0.125,0.65,0.967,0.61,0.104,1,0.976,0.718,0.082]}},"s":{"a":0,"k":[151.942,104.82]},"e":{"a":0,"k":[-167.815,-237.982]},"t":1,"nm":"Gradient Fill 1","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.25696997549,0.25696997549,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[413.823,105.249]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 1","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":16,"s":[{"i":[[0,0],[-18.957,-32.821],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[-37.943,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-103.263,-306.123],[-145.945,-232.238],[73.326,147.52],[164.902,306.123],[139.234,97.802],[99.584,-224.349],[-93.255,-306.123]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":21,"s":[{"i":[[0,0],[-18.561,-91.225],[-26.97,-63.947],[1.999,-1.999],[3.051,0],[7.34,62.131],[23.83,11.189]],"o":[[0,0],[18.561,91.225],[26.97,63.947],[-1.999,2],[-3.051,0],[-7.34,-62.131],[-32.566,-15.29]],"v":[[-77.635,-300.074],[-92.561,-172.03],[-27.312,57.623],[64.558,240.885],[36.034,4.953],[24.331,-197.791],[-10.979,-317.667]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[{"i":[[-2.929,0],[18.739,-69.62],[-6.763,-97.864],[0,0],[-18.357,70.94],[-26.697,43.994],[21.924,11.758]],"o":[[1.465,0],[-24.417,90.715],[4.495,65.046],[0,0],[18.357,-70.94],[26.697,-43.994],[-29.96,-16.996]],"v":[[-11.457,-325.131],[-74.984,-235.123],[-86.88,-18.965],[-9.135,201.332],[-9.781,-67.718],[60.414,-235.795],[41.925,-327.384]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":25,"s":[{"i":[[-5.858,0],[28.986,-92.244],[20.945,-105.678],[0,0],[-24.929,67.483],[-23.332,41.211],[20.017,12.328]],"o":[[2.929,0],[-25.35,80.671],[-11.883,59.954],[0,0],[24.929,-67.483],[23.332,-41.211],[-27.355,-18.702]],"v":[[5.748,-355.123],[-63.787,-252.026],[-92.642,-99.389],[-66.562,220.046],[-10.659,-125.111],[69.058,-274.856],[61.276,-358.564]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":33,"s":[{"i":[[-17.574,0],[19.727,-9.746],[47.179,-67.901],[4.57,-4.57],[-42.574,30.791],[-12.89,24.596],[12.392,14.605]],"o":[[8.787,0],[-19.727,9.746],[-47.179,67.901],[-4.57,4.57],[42.574,-30.791],[12.89,-24.596],[-16.934,-25.525]],"v":[[85.344,-448.367],[43.496,-442.378],[-34.411,-359],[-116.516,-169.781],[6.012,-297.183],[97.52,-362.707],[94.465,-425.243]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":37,"s":[{"i":[[8.505,-3.899],[0,0],[40.202,-40.343],[0,0],[-11.485,11.483],[-24.766,13.633],[5.192,15.902]],"o":[[-16.205,7.428],[0,0],[-39.516,39.654],[0,0],[22.617,-22.613],[18.721,-10.305],[-5.593,-17.128]],"v":[[86.016,-484.86],[67.251,-472.777],[23.042,-436.328],[-57.608,-327.268],[24.071,-394.675],[79.222,-436.536],[116.434,-475.056]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0.167},"t":40,"s":[{"i":[[-6.534,-2.599],[-3.999,-3.999],[44.027,-18.468],[3.999,-3.999],[-11.407,5.299],[-11.36,5.993],[-18.373,-5.223]],"o":[[-4.701,4.952],[3.999,3.999],[-44.027,18.468],[-3.999,3.999],[11.407,-5.299],[20.582,-10.858],[-3.728,-23.623]],"v":[[99.637,-504.77],[102.753,-490.242],[36.17,-483.432],[-39.263,-417.564],[38.893,-448.133],[69.258,-463.431],[97.819,-476.135]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":46,"s":[{"i":[[-36.612,0],[-11.997,-11.996],[0,-18.306],[11.996,-11.997],[18.306,0],[11.996,11.997],[0,18.306]],"o":[[18.306,0],[11.996,11.996],[0,18.306],[-11.997,11.997],[-18.306,0],[-11.997,-11.997],[0,-36.612]],"v":[[221.7,-691.435],[268.576,-672.019],[287.992,-625.143],[268.576,-578.267],[221.7,-558.85],[174.825,-578.267],[155.408,-625.143]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.333,"y":0},"t":68,"s":[{"i":[[-36.612,0],[-11.997,-11.996],[0,-18.306],[11.996,-11.997],[18.306,0],[11.996,11.997],[0,18.306]],"o":[[18.306,0],[11.996,11.996],[0,18.306],[-11.997,11.997],[-18.306,0],[-11.997,-11.997],[0,-36.612]],"v":[[221.7,-691.435],[268.576,-672.019],[287.992,-625.143],[268.576,-578.267],[221.7,-558.85],[174.825,-578.267],[155.408,-625.143]],"c":true}]},{"t":97,"s":[{"i":[[0,0],[-18.957,-32.821],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[-37.943,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-102.356,-292.068],[-145.038,-218.183],[74.233,161.575],[165.808,320.178],[140.14,111.857],[100.49,-210.294],[-92.348,-292.068]],"c":true}]}]},"nm":"Path 2","hd":false},{"ty":"gf","o":{"a":0,"k":100},"r":1,"bm":0,"g":{"p":5,"k":{"a":0,"k":[0,0.976,0.718,0.082,0.35,0.967,0.61,0.104,0.7,0.957,0.502,0.125,0.85,0.91,0.427,0.141,1,0.863,0.353,0.157]}},"s":{"a":0,"k":[-30.057,163.634]},"e":{"a":0,"k":[98.787,-220.98]},"t":1,"nm":"Gradient Fill 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.5,0.5,0.5,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[165.617,307.123]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 2","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":16,"s":[{"i":[[0,0],[0,0],[0,0],[0,0],[-18.957,32.851],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[18.956,32.851],[0,0],[0,0],[0,0]],"v":[[45.818,-159.339],[-213.34,36.088],[-187.672,244.409],[-182.843,252.798],[-97.536,252.798],[121.823,-127.107],[213.339,-285.65]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[{"i":[[80.41,-43.168],[43.204,-32.746],[-16.082,-22.192],[-11.936,-5.661],[-95.606,47.42],[-65.748,63.054],[0,0]],"o":[[-137.507,73.82],[-41.134,31.177],[16.082,22.192],[11.936,5.661],[89.696,-44.488],[60.153,-57.687],[0,0]],"v":[[-78.115,48.932],[-283.503,125.943],[-304.231,212.081],[-251.96,240.965],[-125.571,210.866],[66.284,71.926],[208.279,-117.426]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":27,"s":[{"i":[[81.899,-16.78],[39.925,-38.498],[11.493,-28.287],[-29.078,-12.906],[-75.796,39.173],[-52.227,54.174],[0,3.184]],"o":[[-81.899,16.78],[-31.894,27.841],[-15.325,37.718],[29.078,12.906],[70.913,-36.751],[47.605,-49.741],[0,-6.367]],"v":[[-122.108,107.744],[-331.709,150.207],[-371.893,192.953],[-324.963,269.091],[-200.687,258.246],[-12.994,132.847],[133.264,-9.726]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":32,"s":[{"i":[[62.447,-3.137],[15.037,-2.659],[8.973,-34.774],[-14.864,-9.88],[-62.5,-0.095],[-42.349,24.729],[0,0]],"o":[[-62.447,3.137],[-18.265,3.23],[-10.001,38.755],[14.864,9.88],[62.5,0.095],[42.349,-24.729],[0,0]],"v":[[-254.575,183.439],[-386.509,166.228],[-448.042,216.846],[-415.703,286.683],[-310.448,317.791],[-125.767,241.821],[44.806,138.03]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":35,"s":[{"i":[[41.22,-2.465],[34.515,5.68],[7.051,-31.245],[-9.108,-10.334],[-45.185,-0.075],[-68.638,12.071],[0,3.923]],"o":[[-45.142,2.465],[-40.234,-6.621],[-7.858,34.373],[9.108,10.334],[45.185,0.075],[37.201,-6.543],[0,-7.845]],"v":[[-280.506,217.028],[-406.247,191.436],[-477.529,224.632],[-456.281,289.548],[-383.624,318.151],[-244.276,303.048],[-94.276,242.781]],"c":true}]},{"i":{"x":0.833,"y":1},"o":{"x":0.167,"y":0.167},"t":39,"s":[{"i":[[26.118,13.4],[17.602,-0.748],[4.487,-26.54],[21.328,27.323],[-15.944,-15.299],[-31.204,-13.004],[0,0]],"o":[[-26.118,-13.4],[-21.241,0.149],[-2.982,51.369],[-21.328,-27.323],[25.604,24.569],[31.204,13.004],[0,0]],"v":[[-415.573,206.068],[-478.544,196.842],[-518.718,227.097],[-519.671,301.675],[-490.481,326.937],[-413.435,373.927],[-351.177,392.869]],"c":true}]},{"i":{"x":0.833,"y":1},"o":{"x":0.333,"y":0},"t":46,"s":[{"i":[[-36.612,0],[-11.996,-11.997],[0,-18.306],[11.996,-11.997],[18.306,0],[11.996,11.997],[0,18.306]],"o":[[18.306,0],[11.996,11.996],[0,18.306],[-11.996,11.997],[-18.306,0],[-11.996,-11.997],[0,-36.612]],"v":[[-614.265,76.261],[-567.389,95.678],[-547.973,142.553],[-567.389,189.429],[-614.265,208.846],[-661.14,189.429],[-680.557,142.553]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.333,"y":0},"t":68,"s":[{"i":[[-36.612,0],[-11.996,-11.997],[0,-18.306],[11.996,-11.997],[18.306,0],[11.996,11.997],[0,18.306]],"o":[[18.306,0],[11.996,11.996],[0,18.306],[-11.996,11.997],[-18.306,0],[-11.996,-11.997],[0,-36.612]],"v":[[-614.265,76.261],[-567.389,95.678],[-547.973,142.553],[-567.389,189.429],[-614.265,208.846],[-661.14,189.429],[-680.557,142.553]],"c":true}]},{"t":97,"s":[{"i":[[0,0],[0,0],[0,0],[0,0],[-18.957,32.851],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[18.956,32.851],[0,0],[0,0],[0,0]],"v":[[46.725,-145.284],[-212.433,50.143],[-186.765,258.464],[-181.936,266.853],[-96.63,266.853],[122.73,-113.052],[214.246,-271.595]],"c":true}]}]},"nm":"Path 2","hd":false},{"ty":"gf","o":{"a":0,"k":100},"r":1,"bm":0,"g":{"p":5,"k":{"a":0,"k":[0,0.976,0.718,0.082,0.35,0.967,0.61,0.104,0.7,0.957,0.502,0.125,0.85,0.91,0.427,0.141,1,0.863,0.353,0.157]}},"s":{"a":0,"k":[210.141,-45.888]},"e":{"a":0,"k":[-211.619,36.358]},"t":1,"nm":"Gradient Fill 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.5,0.5,0.5,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[518.19,368.837]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 3","bm":0,"hd":false}],"ip":0,"op":105,"st":16,"bm":0}],"markers":[]};
      var params = {
        container: document.getElementById('lottie'),
        renderer: 'svg',
        loop: true,
        autoplay: true,
        animationData: animationData
      };

      var anim;

      anim = lottie.loadAnimation(params);

    </script>
    <script>
      var observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutationRecord) {
          if (mutationRecord.type === "attributes" && mutationRecord.attributeName==='style' && mutationRecord.target.style.width==="100%") {
            document.querySelector("#cover").style.display= "flex";
            setTimeout(()=> {
              document.querySelector("#cover").style.display= "none";
            }, 3000)

          }
        });
      });

      var target = document.querySelector("#unity-progress-bar-full");
      observer.observe(target, { attributes : true, attributeFilter : ['style'] });
    </script>


    <script>

      function CallQuit(){
        try{
          partnerHandler.sendDataForNative(window, "onCloseView");
        }catch(err) {
          alert("bank app not implement!");
        }
      }

      function CallNative(eventName){
        try{
          console.warn(`-->`+eventName);
          partnerHandler.sendDataForNative(window, eventName);
        }catch(err){
          alert("bank app not implement!");
        }
      }

      var container = document.querySelector("#unity-container");
      var canvas = document.querySelector("#unity-canvas");
      var loadingBar = document.querySelector("#unity-loading-bar");
      var progressBarFull = document.querySelector("#unity-progress-bar-full");
     
      var warningBanner = document.querySelector("#unity-warning");

      // Shows a temporary message banner/ribbon for a few seconds, or
      // a permanent error message on top of the canvas if type=='error'.
      // If type=='warning', a yellow highlight color is used.
      // Modify or remove this function to customize the visually presented
      // way that non-critical warnings and error messages are presented to the
      // user.
      function unityShowBanner(msg, type) {
        function updateBannerVisibility() {
          warningBanner.style.display = warningBanner.children.length ? 'block' : 'none';
        }
        var div = document.createElement('div');
        div.innerHTML = msg;
        warningBanner.appendChild(div);
        if (type == 'error') div.style = 'background: red; padding: 10px;';
        else {
          if (type == 'warning') div.style = 'background: yellow; padding: 10px;';
          setTimeout(function() {
            warningBanner.removeChild(div);
            updateBannerVisibility();
          }, 5000);
        }
        updateBannerVisibility();
      }

      var buildUrl = "Build";
      var loaderUrl = buildUrl + "/{{{ LOADER_FILENAME }}}";
      var config = {
        dataUrl: buildUrl + "/{{{ DATA_FILENAME }}}",
        frameworkUrl: buildUrl + "/{{{ FRAMEWORK_FILENAME }}}",
#if USE_WASM
        codeUrl: buildUrl + "/{{{ CODE_FILENAME }}}",
#endif
#if MEMORY_FILENAME
        memoryUrl: buildUrl + "/{{{ MEMORY_FILENAME }}}",
#endif
#if SYMBOLS_FILENAME
        symbolsUrl: buildUrl + "/{{{ SYMBOLS_FILENAME }}}",
#endif
        streamingAssetsUrl: "StreamingAssets",
        companyName: {{{ JSON.stringify(COMPANY_NAME) }}},
        productName: {{{ JSON.stringify(PRODUCT_NAME) }}},
        productVersion: {{{ JSON.stringify(PRODUCT_VERSION) }}},
        showBanner: unityShowBanner,
      };

      // By default Unity keeps WebGL canvas render target size matched with
      // the DOM size of the canvas element (scaled by window.devicePixelRatio)
      // Set this to false if you want to decouple this synchronization from
      // happening inside the engine, and you would instead like to size up
      // the canvas DOM size and WebGL render target sizes yourself.
      // config.matchWebGLToCanvasSize = false;

      var aspect =  {{{ WIDTH }}}/{{{ HEIGHT }}};
      if(aspect > 1 || (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))){
        
        // Mobile device style: fill the whole browser client area with the game canvas:

        var meta = document.createElement('meta');
        meta.name = 'viewport';
        meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
        document.getElementsByTagName('head')[0].appendChild(meta);
        container.className = "unity-mobile";
        canvas.className = "unity-mobile";

        // To lower canvas resolution on mobile devices to gain some
        // performance, uncomment the following line:
        //config.devicePixelRatio = 1;

         
      } else {
        // Desktop style: Render the game canvas in a window that can be maximized to fullscreen:
        document.body.onresize = function(event) {
          FitToParent();
        };
        FitToParent();
      }

#if BACKGROUND_FILENAME
      canvas.style.background = "url('" + buildUrl + "/{{{ BACKGROUND_FILENAME.replace(/'/g, '%27') }}}') center / cover";
#endif
      loadingBar.style.display = "block";

      canvas.style = "box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px, rgba(0, 0, 0, 0.22) 0px 15px 12px;";

      var myGameInstance = null;
      var script = document.createElement("script");
      script.src = loaderUrl;
      script.onload = () => {
        createUnityInstance(canvas, config, (progress) => {
          progressBarFull.style.width = 100 * progress + "%";
        }).then((unityInstance) => {
          myGameInstance = unityInstance;
          window.unityInstance = unityInstance;
          loadingBar.style.display = "none";
          canvas = unityInstance.Module.canvas;
          getToken();
          if(aspect < 1 && !(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)))
            FitToParent();
        }).catch((message) => {
          alert(message);
        });
      };
      
      document.body.appendChild(script);
      function FitToParent(){
        aspect = 1080/1920;
        var container = canvas.parentElement;
        
        let height = window.innerHeight;
        let width = height * aspect;

         
        if(width < window.innerWidth){
          canvas.height = height;
          canvas.width = width;

          canvas.style.height = height;
          canvas.style.width = width;
        }else{
          width = window.innerWidth;
          height = width / aspect;

          canvas.height = height;
          canvas.width = width;

          canvas.style.height = height;
          canvas.style.width = width; 
        }  
       
        container.style.width = canvas.style.width = width + "px";
				container.style.height = canvas.style.height = height + "px"; 
      }

      

      function PauseGame(isPause){
        myGameInstance.SendMessage('AdManager', 'OnPauseGame', isPause?1:0);
      }

      function isLanscape(){
        return {{{ WIDTH }}}/{{{ HEIGHT }}} > 1;
      }

      function getToken(){
        var $_GET = {};
        if(document.location.toString().indexOf('?') !== -1) {
            var query = document.location
                          .toString()
                          // get the query string
                          .replace(/^.*?\?/, '')
                          // and remove any existing hash string (thanks, @vrijdenker)
                          .replace(/#.*$/, '')
                          .split('&');

            for(var i=0, l=query.length; i<l; i++) {
              var aux = decodeURIComponent(query[i]).split('=');
              $_GET[aux[0]] = aux[1];
            }
        }
        //get the 'index' query parameter
        
        if(!$_GET['userToken']){
          alert('Invalid UserToken. Are you freaking hacker or just dum?');
          return;
        }
        
        myGameInstance.SendMessage('----RequestData-----', 'onGetUserToken', $_GET['userToken']);
        myGameInstance.SendMessage('----RequestData-----', 'onGetHost', window.location.hostname);
        if($_GET['deviceCode'])
          myGameInstance.SendMessage('----RequestData-----', 'onGetDeviceCode', $_GET['deviceCode']);
      }

     

            // Listen for a message from the parent window
      window.addEventListener('message', event => {
        if (event.data === 'getLandscape') {
          // Send a message back to the parent window with the result of the isLandscape function
          event.source.postMessage('isLandscape', event.origin);
        }
      }); 
    </script>
  </body>
</html>
